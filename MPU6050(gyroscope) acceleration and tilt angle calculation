#include <Wire.h>
#include <MPU6050.h>

MPU6050 mpu;

void setup() {
  Serial.begin(115200);
  Wire.begin();

  Serial.println("MPU6050 Test");
  mpu.initialize();

  if (mpu.testConnection())
    Serial.println("MPU6050 Connected!");
  else
    Serial.println("Connection failed!");
}

void loop() {
  int16_t ax, ay, az;
  mpu.getAcceleration(&ax, &ay, &az);

  // Raw acceleration values
  Serial.print("aX = "); Serial.print(ax);
  Serial.print(" | aY = "); Serial.print(ay);
  Serial.print(" | aZ = "); Serial.print(az);

  // Tilt angle calculation (Accelerometer only)
  float roll  = atan2((float)ay, (float)az) * 180.0 / PI;
  float pitch = atan2(-(float)ax, sqrt((float)ay * ay + (float)az * az)) * 180.0 / PI;

  Serial.print(" | Roll = ");  Serial.print(roll);
  Serial.print("° | Pitch = "); Serial.print(pitch);
  Serial.println("°");

  delay(500);
}
